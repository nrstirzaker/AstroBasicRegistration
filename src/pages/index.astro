---
export const prerender = false
import Layout from '../layouts/Layout.astro';
import LookupAddress from '../components/LookupAddressComponent.vue';
import Membership from '../components/Membership.vue';
import {actions, isInputError} from 'astro:actions';
import {Image} from 'astro:assets';
import village from '../assets/send.jpg';

const result = Astro.getActionResult(actions.register)
const inputErrors = isInputError(result?.error) ? result.error.fields : {}


// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
    <div class="flex justify-center items-center w-screen h-screen bg-gradient-to-br from-blue-300 to-sky-50">
        <div class="flex justify-center items-center w-[590px] h-[600px] ">
            <img src={village.src} class="w-auto h-auto object-fill" alt="Image from Send in Woking"  />
        </div>
        <div class="w-[590px] h-[600px] bg-sky-50">
            <form method="POST" action={actions.register}>
                {result?.error && Object.keys(inputErrors).length === 0 && (
                        <p>There was a problem processing your registration</p>)}
                <fieldset>


                    <div class="flex my-[10px] gap-2 justify-between items-center ">
                        <div class="">
                            <label class="block" for="email_address">Email Address</label>
                            <input type="text" id="email_address" name="email_address" class="block w-[200px] inset-shadow-sm/10 bg-white"/>

                        </div>

                        <div class="flex-row justify-center items-center h-full w-full">
                            <label class="flex justify-center " for="no_email_address">I don't have an email address</label>
                            <input class="block h-full w-full inset-shadow-sm/10 bg-white m-2" type="checkbox" id="no_email_address" name="no_email_address" />
                        </div>
                    </div>
                    <div class="flex gap-[5px] my-[10px]">
                        <div>
                            <label class="block" for="title">Title</label>
                            <select id="title" name="title" class="h-[26px] inset-shadow-sm/10 bg-white">
                                <option value="" disabled selected></option>
                                <option value="Mr">Mr</option>
                                <option value="Mrs">Mrs</option>
                                <option value="Ms">Ms</option>
                                <option value="Dr">Dr</option>
                            </select>
                        </div>
                        <div>
                            <label class="block" for="first_name">First Name</label>
                            <input type="text" id="first_name" name="first_name" class="w-[180px] inset-shadow-sm/10 bg-white"
                                   aria-describedby={inputErrors.first_name ? "first_name-error" : undefined}
                                   data-error={inputErrors.first_name}/>
                            {

                                            <div class="errorMsg"
                                                 id="first_name-error">{inputErrors['first_name'] ? inputErrors['first_name'] : "First name error"}</div>
                            }
                        </div>

                        <div>
                            <label class="block" for="surname">Surname</label>
                            <input type="text" id="surname" name="surname" class="w-[325px] inset-shadow-sm/10 bg-white"/>
                        </div>
                    </div>

                    <div>
                        <LookupAddress inputErrors={inputErrors} client:load/>
                    </div>

                    <div>

                        <Membership client:load/>

                        <br>
                        <div class="flex my-0">
                            <label for="privacy_statement">I confirm that I have read the <a href="">privacy
                                statement</a></label>
                            <input type="checkbox" id="privacy_statement" name="privacy_statement" value="false"/>
                        </div>
                        <br>
                        <label for="emai" class="sr-only">h0n3yp0t</label>
                        <input id="emai" type="text" name="emai" class="sr-only" tabindex="-1"/>

                    </div>
                    <div class="flex justify-evenly w-full">
                        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded"
                                type="submit">Submit
                        </button>
                        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded"
                                type="reset">Cancel
                        </button>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
    </Layout>